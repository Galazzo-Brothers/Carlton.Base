@using Carlton.Core.Components
@namespace Carlton.Core.Flux.Debug.Components
@inherits BaseConnectedComponent<ModalViewModel>
@inject IBrowserStorageService BrowserStorageService

<Modal ModalVisible="@IsVisible"
       ModalPrompt="Are you sure?"
       ModalMessage="Do you really want to delete this records? It cannot be undone."
       OnModalDissmissed="OnModalDismised" />


@code {
    public bool IsVisible { get; set; } = false;

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        IsVisible = ViewModel.IsVisible;
    }

    private async Task OnModalDismised(bool userConfirmed)
    {
        if (userConfirmed)
        {
            await base.OnComponentEvent.InvokeAsync(new ClearLocalStorageCommand());
            await BrowserStorageService.ClearLogs();
        }

        IsVisible = false;
    }
}