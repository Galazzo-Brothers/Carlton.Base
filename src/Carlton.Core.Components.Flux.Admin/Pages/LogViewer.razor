@using Carlton.Core.Components.Library
@using Carlton.Core.Utilities.Logging;
@namespace Carlton.Core.Components.Flux.Admin
@inject InMemoryLogger Logger
@page "/admin/logs"

<div class="log-viewer">
    <Table Headings="Headings"Items="LogMessages"
        ShowPaginationRow="true" RowsPerPageOpts="RowsPerPageInts" >
        <RowTemplate Context="item">
            <div class="row">
               <span>@item.Timestamp</span>
               <span>@item.Message</span>
               <span>@item.LogLevel</span>
            </div>
        </RowTemplate>
    </Table>
</div>


@code {

    private IEnumerable<LogMessage> LogMessages => Logger.GetLogMessages();

    private IEnumerable<TableHeadingItem> Headings
    {
        get => new List<TableHeadingItem>
        {
            new TableHeadingItem("Timestamp"),
            new TableHeadingItem("Message"),
            new TableHeadingItem("Log Level", "Log Level"),
            new TableHeadingItem("Event ID", "EventID"),
        };
    }

    private IEnumerable<int> RowsPerPageInts = new List<int>
    {
        5, 10, 25
    };
}

